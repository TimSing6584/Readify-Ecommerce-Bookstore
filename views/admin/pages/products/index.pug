extends ../../layouts/default.pug
include ../../mixins/filter-stock.pug
include ../../mixins/search.pug
block main
    h1 Product Lists

    .card.mb-3
        .card-header Search and Filter
        .card-body
            .row
                .col-6
                    +filter-buttons(filterButtons)
                .col-6
                    +search(last_search_word)
    table.table.table-hover.table-sm
        thead
            tr
                th N.o
                th Image
                th Title
                th Category
                th Price
                th Discount
                th Stock
                th Action
        tbody
            each item, index in products
                tr
                    td #{index + 1 + (pagination.currentPage - 1) * pagination.limitItems}
                    //- calculate accurate index at each page
                    td
                        img(
                            src=item.images
                            alt="Product 1"
                            width="100px"
                            height="auto"
                        )
                    td #{item.title}
                    td #{item.category}
                    td #{item.price.toFixed(0)}$
                    td #{item.discountPercentage.toFixed(0)}%
                    td
                        if item.stock > 0
                            a(href="#" class="badge bg-success") #{item.stock}
                        else
                            a(href="#" class="badge bg-danger") #{item.stock}
                    td
                        button(class="btn btn-warning btn-sm") Modify
                        button(class="btn btn-danger btn-sm ml-1") Delete
    nav
        ul(class="pagination")
            li(class="page-item")
                button(class="page-link" pageNumber=pagination.currentPage > 1 ? pagination.currentPage - 1: 1) Previous
            - for(let i = 0; i < pagination.total_pages; i ++){
                li(class="page-item")
                    button(class=`page-link ${i + 1 == pagination.currentPage ? "active" : ""}` pageNumber=i + 1) #{i + 1}
            - }
            li(class="page-item")
                button(class="page-link" pageNumber=pagination.currentPage < pagination.total_pages ? pagination.currentPage + 1: pagination.total_pages) Next
